from flask import Flask , render_template , request
import pandas as pd
import pickle
app = Flask(__name__)
model = pickle.load(open('Logistic.pkl','rb'))


pot = pd.read_csv('Cleaned.csv')
@app.route('/')
def index():
    char_1 = pot['char_1'].unique()
    group_1 = pot['group_1'].unique()
    char_2 = pot['char_2'].unique()
    char_3 = pot['char_3'].unique()
    char_4 = pot['char_4'].unique()
    char_5 = pot['char_5'].unique()
    char_6 = pot['char_6'].unique()
    char_7 = pot['char_7'].unique()
    char_8 = pot['char_8'].unique()
    char_9 = pot['char_9'].unique()
    char_10 = pot['char_10'].unique()
    char_11 = pot['char_11'].unique()
    char_12 = pot['char_12'].unique()
    char_13= pot['char_13'].unique()
    char_14= pot['char_14'].unique()
    char_15= pot['char_15'].unique()
    char_16 = pot['char_16'].unique()
    char_17 = pot['char_17'].unique()
    char_18= pot['char_18'].unique()
    char_19 = pot['char_19'].unique()
    char_20 = pot['char_20'].unique()
    char_21= pot['char_21'].unique()
    char_22 = pot['char_22'].unique()
    char_23= pot['char_23'].unique()
    char_24= pot['char_24'].unique()
    char_25 = pot['char_25'].unique()
    char_26 = pot['char_26'].unique()
    char_27= pot['char_27'].unique()
    char_28= pot['char_28'].unique()
    char_29 = pot['char_29'].unique()
    char_30 = pot['char_30'].unique()
    char_31 = pot['char_31'].unique()
    char_32 = pot['char_32'].unique()
    char_33 = pot['char_33'].unique()
    char_34 = pot['char_34'].unique()
    char_35 = pot['char_35'].unique()
    char_36 = pot['char_36'].unique()
    char_37 = pot['char_37'].unique()
    char_38 = pot['char_38'].unique()

    return render_template('index.html', group_1=group_1,char_1=char_1,char_2=char_2,char_3=char_3,char_4=char_4,char_5=char_5,char_6=char_6,char_7=char_7,char_8=char_8,char_9=char_9,char_10=char_10,char_11=char_11,char_12=char_12,char_13=char_13,char_14=char_14,char_15=char_15,char_16=char_16,char_17=char_17,char_18=char_18,char_19=char_19,char_20=char_20,char_21=char_21,char_22=char_22,char_23=char_23,char_24=char_24,char_25=char_25,char_26=char_26,char_27=char_27,char_28=char_28,char_29=char_29,char_30=char_30,char_31=char_31,char_32=char_32,char_33=char_33,char_34=char_34,char_35=char_35,char_36=char_36, char_37=char_37,char_38=char_38)
@app.route('/predict',methods=['POST'])
def predict():
    char_1 = request.form.get('char_1')
    group_1 = request.form.get('group_1')
    char_2 = request.form.get('char_2')
    char_3 = request.form.get('char_')
    char_4 = request.form.get('char_4')
    char_5 = request.form.get('char_5')
    char_6 = request.form.get('char_6')
    char_7 = request.form.get('char_7')
    char_8 = request.form.get('char_8')
    char_9 = request.form.get('char_9')
    char_10 = request.form.get('char_10')
    char_11 = request.form.get('char_11')
    char_12 = request.form.get('char_12')
    char_13 = request.form.get('char_13')
    char_14 = request.form.get('char_14')
    char_15 = request.form.get('char_15')
    char_16 = request.form.get('char_16')
    char_17 = request.form.get('char_17')
    char_18 = request.form.get('char_18')
    char_19 = request.form.get('char_19')
    char_20 = request.form.get('char_20')
    char_21 = request.form.get('char_21')
    char_22 = request.form.get('char_22')
    char_23 = request.form.get('char_23')
    char_24 = request.form.get('char_24')
    char_25 = request.form.get('char_25')
    char_26 = request.form.get('char_26')
    char_27 = request.form.get('char_27')
    char_28 = request.form.get('char_28')
    char_29 = request.form.get('char_29')
    char_30 = request.form.get('char_30')
    char_31 = request.form.get('char_31')
    char_32 = request.form.get('char_32')
    char_33 = request.form.get('char_33')
    char_34 = request.form.get('char_34')
    char_35 = request.form.get('char_35')
    char_36 = request.form.get('char_36')
    char_37 = request.form.get('char_37')
    char_38 = request.form.get('char_38')
    char_38 = int(request.form.get('char_38'))

    prediction = model.predict(pd.DataFrame([[char_1,group_1,char_2,char_3,char_4,char_5,char_6,char_7,char_7,char_8,char_9,char_10,char_11,char_12,char_13,char_14,char_15,char_16,char_17,char_18,char_19,char_20,char_21,char_22,char_23,char_24,char_25,char_26,char_27,char_28,char_29,char_30,char_31,char_32,char_33,char_34,char_35, char_36,char_37,char_38]],columns=['char_1','group_1','char_2','char_3','char_4','char_5','char_6','char_7','char_7','char_8','char_9','char_10','char_11','char_12','char_13','char_14','char_15','char_16','char_17','char_18','char_19','char_20','char_21','char_22','char_23','char_24','char_25','char_26','char_27','char_28','char_29','char_30','char_31','char_32','char_33','char_34','char_35','char_36','char_37','char_38']))
    
    return str(prediction[0])


if __name__ == '__main__':
    app.run(debug=True)
